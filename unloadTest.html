<html>
<body>
<script>
    function addUnloadBeacon() {
        window.addEventListener('unload', function () {
            navigator.sendBeacon(document.getElementById("basepath").value + "/foo");
        });
    }
</script>

Default path for requests from unload: <input type='text' id='basepath' value="http://127.0.0.1:8000/"><br><br>
Add unload handlers:
<button onclick="addUnloadBeacon()">sendBeacon</button>
<br clear=all><br>

</body>
</html>
